/* =====================
   Reset & Base
   ===================== */
:is(html, body) { height: 100%; }
body {
    font-family: var(--font-sans, Arial, sans-serif);
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    /* Solid, uniform page background using design token */
    background: var(--bg);
    color: var(--text);
    -webkit-font-smoothing: antialiased; /* kept for consistency */
}

:is(h1,h2,h3) { color: #333; }

/* =====================
     Accessibility & Motion
     ===================== */
:where(a, button, .button) { -webkit-tap-highlight-color: transparent; }
:where(a:focus-visible, button:focus-visible, .button:focus-visible) { outline: none; box-shadow: 0 0 0 4px rgba(10,79,176,0.12); }

@media (prefers-reduced-motion: reduce) {
    * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}

/* prettier hero title for the search page */
.hero-title {
    font-size: clamp(1.8rem, 4vw, 2.6rem);
    line-height: 1.02;
    margin: 6px 0 18px 0;
    font-weight: 700;
    letter-spacing: -0.02em;
    text-align: center;
    color: var(--text);
    text-shadow: 0 6px 18px rgba(11,43,76,0.08);
}

.container { max-width: 1200px; margin: 0 auto; padding: 20px; }

.minimal-center { display:flex; flex-direction:column; align-items:center; gap:18px; max-width:880px; width:100%; }
.search-wrap { width:100%; display:flex; justify-content:center; }

/* hero-search: visually anchored under fixed header with polished card style */
.hero-search {
    margin-top: 8px; /* slight spacing under fixed header */
    width: 100%;
    /* use elevated bg token so hero feels slightly distinct but harmonious with page */
    background: var(--bg-elevated);
    border-radius: 18px;
    padding: 18px 22px;
    box-shadow: 0 12px 30px rgba(10,79,176,0.06), inset 0 1px 0 rgba(255,255,255,0.6);
    border: 1px solid rgba(11,43,76,0.04);
    position: relative;
}

/* optional subtle textured overlay for visual depth; enable by adding .has-texture */
.hero-search.has-texture::after {
    content: '';
    pointer-events: none;
    position: absolute;
    inset: 0;
    background-image: radial-gradient(circle at 10% 20%, rgba(255,255,255,0.03), transparent 10%),
                      radial-gradient(circle at 80% 80%, rgba(0,0,0,0.01), transparent 10%);
    mix-blend-mode: overlay;
    opacity: 0.9;
}

/* reduce the large header space since page title removed */
.app-header { display:none }

/* =====================
   Components: Buttons
   ===================== */
:where(.button) {
    display:inline-flex;
    align-items:center;
    gap:8px;
    background:var(--primary);
    color:#fff;
    border:0;
    padding:10px 16px;
    border-radius:calc(var(--radius-lg) * 1.1);
    cursor:pointer;
    font-weight:var(--fw-medium);
    text-decoration:none;
    transition: transform 180ms ease, box-shadow 180ms ease, filter 140ms ease;
}

:where(.button):hover { transform: translateY(-4px); filter: brightness(.96); box-shadow: 0 12px 36px rgba(11,43,76,0.08); }
:where(.button):focus-visible { outline: none; box-shadow: 0 0 0 4px rgba(10,79,176,0.12); }
:where(.button)[disabled], :where(.button):disabled { opacity:0.6; cursor:not-allowed; filter:grayscale(.08); } /* unified button block */

.button.primary { background: linear-gradient(180deg,var(--primary),var(--primary-600)); box-shadow: var(--shadow-sm); }


.results-grid {
    display:grid;
    grid-template-columns: 1fr;
    gap:20px;
    /* Full-bleed results: stretch the results area to the viewport edges while keeping inner gutter */
    width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
    padding-left: 28px; /* inner gutter so cards don't touch the viewport edge */
    padding-right: 28px;
    box-sizing: border-box;
}
.card {
    background: linear-gradient(180deg, var(--surface), var(--surface));
    border-radius:calc(var(--radius-lg) * 1.5);
    box-shadow: var(--shadow-sm);
    overflow:hidden;
    border:1px solid rgba(11,43,76,0.04);
    display:flex;
    flex-direction:row;
    align-items:stretch;
    /* ensure cards span the available width and have comfortable internal padding */
    width: 100%;
}
.card-grid { display:flex; align-items:stretch; }
.card-media {
    /* make the media a flexible fixed column that doesn't overflow the body */
    flex: 0 0 260px;
    max-width: 260px;
    min-width: 160px;
    background: linear-gradient(135deg,#eef7ff,#fbfdff);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:8px;
    overflow:hidden;
}
.card-media img,
.card-media .thumb img {
        font-size: 16px; /* sensible base for rem calculations */
        line-height: 1.45;
        -moz-osx-font-smoothing: grayscale;
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
    border-radius:12px;
}
.thumb { width:100px; height:100px; border-radius:12px; background: linear-gradient(180deg, var(--bg-elevated), var(--surface)); display:flex; align-items:center; justify-content:center; font-size:28px; color:var(--primary-600); font-weight:800; }
.card-body { padding:20px 26px; flex:1; display:flex; flex-direction:column; min-height:220px; }
.card-header { display:flex; align-items:flex-start; justify-content:space-between; gap:12px }
.card-title { font-size:1.125rem; color:var(--text); font-weight:700; text-decoration:none }
.card-title:hover { text-decoration:underline }
.price-badge { background:linear-gradient(180deg,#f5fff4,#ecfff0); color:var(--accent-600); font-weight:900; padding:10px 16px; border-radius:12px; font-size:1.15rem; box-shadow: inset 0 -1px 0 rgba(0,0,0,0.02); min-width:120px; text-align:right; align-self:flex-start }
.card-desc { color:var(--text); margin-top:8px; font-size:0.95rem; line-height:1.3; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:3; line-clamp:3; }
.card-meta { font-size: 13px; color: var(--muted); margin-top:6px }
.card-actions { margin-top: auto }

.card {
    transition: transform 220ms cubic-bezier(.16,.84,.24,1), box-shadow 220ms cubic-bezier(.16,.84,.24,1);
}
.card-actions .button { padding:8px 12px }

.map { height:400px; width:100%; border-radius:var(--radius-md); margin-top:18px }

.app-header { text-align:center; margin-bottom:18px }
.app-header .lead { color:var(--muted); margin-top:6px }

.search-form { background: linear-gradient(90deg, var(--surface), #fbfbfb); border:1px solid rgba(11,43,76,0.04); padding:12px; border-radius:var(--radius-sm); display:block; margin-bottom:14px }
.search-row { display:flex; gap:12px; align-items:center; margin-bottom:8px }
.search-input { flex:1; padding:12px 14px; border:1px solid rgba(11,43,76,0.06); border-radius:999px; font-size:14px; background:transparent; box-shadow: var(--shadow-sm); }
.search-input::placeholder { color: rgba(11,43,76,0.32); }

/* Center hero content */
.hero-search { display:flex; align-items:center; justify-content:center; }

/* vertical centering variant for the hero (used on the single-search page) */
.hero-search.hero-center {
    min-height: calc(100vh - 140px); /* account for fixed header + padding */
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    padding-left: 28px;
    padding-right: 28px;
}

/* Single search landing: make the page a centered search bar that expands to show inline results */
.single-search-landing {
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 24px;
    box-sizing: border-box;
    /* unify background across the entire page to avoid two-tone look */
    background: var(--bg);
    background-image: none;
}

/* ensure animated-search sits centered and doesn't exceed viewport */

.animated-search {
    width: 100%;
    max-width: 980px;
    margin: 0 auto;
    transition: all 200ms ease;
    background: transparent; /* let the page background show through */
}

/* when collapsed show compact centered bar look */
.animated-search .bar { width: 100%; max-width: 680px; margin: 0 auto; position:relative; }
.animated-search form input { width: auto; max-width: 100%; box-sizing: border-box; transition: width 180ms ease; background: transparent; color: inherit; }

/* ensure text measurement span uses same font styles */
.animated-search span[aria-hidden] { font: inherit; font-size: 16px; font-weight:500; }

/* utility: full width helper to replace inline styles */
.full-width { width: 100%; }

.search-select { width:180px; padding:8px 10px; border-radius:6px; border:1px solid rgba(11,43,76,0.06); background:transparent }
.search-controls { display:flex; justify-content:space-between; align-items:center }
.checkbox-inline { display:flex; align-items:center; gap:8px; color:var(--muted) }

/* ...existing code... */

.backend-status { position:fixed; right:12px; top:82px; display:flex; align-items:center; gap:8px; padding:8px 12px; border-radius:20px; font-size:12px; font-weight:600; z-index:1000; color:#fff }
.backend-status .dot { width:10px; height:10px; border-radius:50%; display:inline-block }
.backend-status.online { background: linear-gradient(90deg,#2ecc71,#1aa34a) }
.backend-status.offline { background: linear-gradient(90deg,#e74c3c,#c0392b) }
.backend-status.checking { background: linear-gradient(90deg,#95a5a6,#7f8c8d) }

@media (max-width:840px) {
    /* switch to single column grid on narrow screens and stack card content */
    .results-grid { grid-template-columns: 1fr; width:100%; margin-left:0; margin-right:0; padding-left:0; padding-right:0 }
    .card { flex-direction:column }
    .card-media { width:100%; flex: 0 0 auto; height:180px }
    .thumb { width:64px; height:64px }
    .card-body { padding:14px }
}

@media (max-width:640px) {
    .results-grid { grid-template-columns: 1fr; }
    .card { flex-direction:column }
    .card-media { width:100%; flex: 0 0 auto; height:140px }
    .thumb { width:56px; height:56px }
    .search-row { flex-direction:column }
    .search-controls { align-items:flex-start }
    /* make price badge wrap neatly on small screens */
    .price-badge { align-self:flex-end; min-width:0 }
}

/* Header / navigation (see polished block further down) */
/* Dashboard hero */
.dashboard-hero { background: linear-gradient(180deg, rgba(10,79,176,0.06), rgba(255,255,255,0)); border-radius:24px; padding:28px; margin-bottom:20px; display:flex; align-items:center; gap:20px }
.hero-content { flex:1 }
.dashboard-hero h2 { margin:0; font-size:1.8rem; color:var(--text); font-weight:var(--fw-semibold) }
.dashboard-hero p { margin-top:8px; color:var(--muted); font-size:1rem }
.hero-actions { margin-top:12px; display:flex; gap:8px }
.hero-categories { display:flex; gap:10px; margin-top:12px }
.hero-categories .cat { background:linear-gradient(180deg,#fff,#f6fbff); padding:10px 12px; border-radius:20px; box-shadow:var(--shadow-sm); font-weight:600 }
.hero-card { width:260px; height:140px; border-radius:14px; background:linear-gradient(135deg,#eef7ff,#ffffff); display:flex; align-items:center; justify-content:center; box-shadow:var(--shadow-sm) }
.hero-card-inner { color:var(--primary-600); font-weight:700; font-size:1.05rem }

.button[disabled], .button:disabled { opacity:0.6; cursor:not-allowed; filter:grayscale(.1); }

.no-results { padding:18px; background:linear-gradient(180deg,var(--surface),var(--bg-elevated)); border-radius:20px; box-shadow:var(--shadow-sm); }
.example-card { display:flex; gap:12px; align-items:flex-start; padding:14px }

.site-header { position:fixed; top:0; left:0; right:0; height:64px; background: rgba(255,255,255,0.65); -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); box-shadow: 0 6px 18px rgba(11,43,76,0.06); display:flex; align-items:center; z-index:900 }
.site-header .brand-title { font-family: var(--font-sans); }
.site-header.transparent, header.transparent {
    background: transparent;
    box-shadow: none;
}
.site-nav { display:flex; align-items:center; gap:8px; padding:6px; border-radius:12px; background: rgba(255,255,255,0.5); -webkit-backdrop-filter: blur(6px); backdrop-filter: blur(6px); }
.site-nav a { margin-left:0; color:var(--muted); text-decoration:none; padding:6px 10px; border-radius:999px; background: transparent; box-shadow: none; font-weight:600; font-size:0.95rem }
.site-nav a:hover { background: rgba(10,79,176,0.08); color: var(--text); transform: translateY(-1px); }
.site-nav .cta-link { background: linear-gradient(180deg,var(--accent),var(--accent-600)); color:#fff; margin-left:6px; box-shadow: var(--shadow-sm); }

/* nav icon + animated underline */
.site-nav .nav-icon { margin-right: 8px; font-size: 14px }
.site-nav a { position: relative; display: inline-flex; align-items: center; gap:6px }
.site-nav .nav-underline { position: absolute; left: 12px; right: 12px; bottom: -8px; height: 3px; border-radius: 6px; background: transparent; transform: scaleX(0); transition: transform .28s cubic-bezier(.2,.9,.3,1), background .28s ease; }
.site-nav a:hover .nav-underline { transform: scaleX(1); background: linear-gradient(90deg,var(--primary),var(--primary-600)); }

/* inline spinner inside the animated search */
.inline-spinner { width:18px; height:18px; border-radius:50%; border:2px solid rgba(255,255,255,0.4); border-top-color: rgba(255,255,255,0.9); margin-left:8px; animation: spin 0.9s linear infinite; display:inline-block }

/* screen-reader only */
.sr-only { position: absolute !important; height: 1px; width: 1px; overflow: hidden; clip: rect(1px, 1px, 1px, 1px); white-space: nowrap; border: 0; padding: 0; margin: -1px; }

/* tweak fonts and smoothing for pixel-perfect look (handled in base body rule) */
.site-header .brand-title { font-weight: 600; letter-spacing: -0.01em }
.site-nav a span { display: inline-block }

/* Header polish */
.site-header-inner { display:flex; align-items:center; justify-content:space-between; gap:12px; }
.brand { display:flex; align-items:center; gap:12px }
.brand .brand-title { font-size:1.05rem; font-weight:700; color:var(--text) }
.brand .brand-sub { font-size:0.78rem; color:var(--muted) }
.site-nav a:hover { background: rgba(10,79,176,0.06); color: var(--text) }
.site-nav .cta-link { padding:8px 12px; box-shadow: var(--shadow-sm); }

/* postal suggestions dropdown moved to CSS to replace inline styling */
.postal-suggestions { position: absolute; left: 0; right: 0; top: 44px; background: var(--surface); border: 1px solid rgba(11,43,76,0.04); border-radius: 8px; box-shadow: var(--shadow-sm); z-index: 40; max-height: 320px; overflow-y: auto; }
.postal-item { padding: 8px 12px; cursor: pointer; display:flex; justify-content:space-between; gap:8px; align-items:center }
.postal-item:hover { background: linear-gradient(90deg, rgba(10,79,176,0.03), rgba(255,255,255,0)); }
.postal-item .muted { color: var(--muted); font-size: 12px }

/* reserve space for right-side controls in the search row */
.search-side { width: 140px }

/* when page displays a centered hero, make header sit above content and soften nav */
.page-hero .site-header { background: transparent; box-shadow: none }
.page-hero .site-nav a { background: transparent }

/* keep hero visually constrained on large screens */
.hero-search { max-width: 980px; margin-left: auto; margin-right: auto; }

/* when user scrolls, make header solid again for readability */
.page-hero .site-header.scrolled {
    background: linear-gradient(180deg, rgba(15,20,30,0.9), rgba(15,20,30,0.88));
    box-shadow: 0 6px 24px rgba(2,6,23,0.5);
    backdrop-filter: blur(6px);
}
.page-hero .site-header.scrolled .site-nav a { background: transparent }

/* Dark theme: use subtle dark glass for nav */
.theme-dark .site-header { background: rgba(8,10,14,0.5); box-shadow: 0 6px 18px rgba(0,0,0,0.5); }
.theme-dark .site-nav { background: rgba(12,14,18,0.36); }
.theme-dark .site-nav a { color: rgba(255,255,255,0.88); }

/* focus states */
.search-input:focus { outline: 2px solid rgba(10,79,176,0.12); box-shadow: 0 6px 14px rgba(10,79,176,0.06); }

/* small-screen header adjustments */
@media (max-width:640px) {
    .site-header { height:64px }
    .site-header-inner { padding: 0 12px }
    .site-nav { gap:6px; padding:6px }
    .site-nav a { padding:6px 8px; font-size:0.92rem }
}

/* logo styling */
.logo { width:48px; height:48px; border-radius:10px; background:linear-gradient(135deg,var(--primary),var(--accent)); display:flex; align-items:center; justify-content:center; color:#fff; font-weight:800; font-size:20px; text-decoration:none }
.logo:hover { transform: translateY(-2px); }

/* backend status slight reposition so it doesn't overlap header on narrow screens */
.backend-status { top:92px }
@media (max-width:640px) { .backend-status { top:78px; right:8px } }

/* hover lift for cards (handled by unified .card:hover later) */

/* input-like styling for future search box */
.search-pill { display:flex; gap:8px; align-items:center; padding:12px 16px; border-radius:999px; background:var(--surface); box-shadow:var(--shadow-sm); border:1px solid rgba(11,43,76,0.05) }

/* Page top spacing (account for fixed header) */
main { padding-top:84px }

/* spinner overlay */
.spinner-overlay { display:flex; align-items:center; justify-content:center; padding:18px; }
.spinner { width:64px; height:64px; border-radius:50%; border:8px solid rgba(0,0,0,0.08); border-top-color: #0078d4; animation: spin 1s linear infinite }
@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

/* Animated search widget styles (converted from example) */
/* Consolidated animated-search/search styles: unified, accessible, reduced-motion friendly */
.animated-search, .search {
    --search-primary: var(--primary);
    --search-primaryLight: var(--primary-600);
    /* use the elevated bg token so the search visually matches cards/hero */
    background: var(--bg-elevated);
    padding: 12px 16px 12px 48px;
    position: relative;
    display: table;
    margin: auto;
    border-radius: 10px;
    box-shadow: 0 10px 30px -6px rgba(18,22,33, .12);
    transition: background var(--trans-fast), transform var(--trans-fast), padding var(--trans-medium);
    width: 520px; max-width: 92%; overflow: visible;
}
.animated-search .bar, .search .bar { position: absolute; left: 16px; top: 15px; width: 32px; height: 32px; overflow: hidden; }
.animated-search .bar, .search .bar { pointer-events: none; }
.animated-search .bar span, .search .bar span { display:block; color:#fff; position:absolute; left:12px; top:0; line-height:32px; font-weight:500; font-size:16px; opacity:0; right:16px; overflow:hidden; white-space:nowrap }
.animated-search .bar:before, .search .bar:before { content:''; position:absolute; left:0; top:0; bottom:0; right:16px; border-radius:16px 0 0 16px; background:var(--search-primary); opacity:0 }
.animated-search .bar .icon, .search .bar .icon { flex:0 0 32px; width:32px; height:32px; background:var(--search-primary); border-radius:50%; position:absolute; z-index:1; top:0; right:0; transform-style:preserve-3d; transform-origin:0 0; transform:scale(.8); transition:transform .4s ease, background .1s ease }
.animated-search .bar .icon:before, .animated-search .bar .icon:after, .search .bar .icon:before, .search .bar .icon:after { content:''; display:block; position:absolute; backface-visibility:hidden; border-radius:50% }
.animated-search .bar .icon:before, .search .bar .icon:before { background:#fff; left:4px; top:4px; right:4px; bottom:4px; z-index:2 }
.animated-search form, .search form { display:block; padding:0; margin:0 }
.animated-search form, .search form { position: relative; z-index: 2; }
.animated-search input, .search input {
    white-space: pre;
    font-size: 16px;
    font-family: inherit;
    padding: 8px 16px 8px 12px;
    display: inline-block;
    line-height: 22px;
    font-weight: 500;
    color: var(--search-primaryLight);
    caret-color: var(--search-primaryLight);
    border: 0;
    background: transparent;
    outline: none;
    transition: color .12s ease, width .18s ease;
    width: auto;
    /* prevent clipping: allow the input to grow but cap it and allow horizontal scroll */
    max-width: calc(100% - 140px);
    min-width: 40px;
    overflow-x: auto;
}
.animated-search .close, .search .close { border-radius:50%; position:absolute; right:16px; width:24px; height:24px; background:#E4ECFA; top:19px; cursor:pointer; opacity:0; visibility:hidden; transform:translate(-8px,0); transition: transform .3s ease, opacity .3s ease, visibility .3s ease }
.animated-search .results-panel, .search .results-panel { overflow:hidden; margin:0; padding:8px 0 24px 0; list-style:none; position:absolute; left:16px; top:62px; right:16px; width:auto; max-height:0; opacity:0; visibility:hidden; transition: max-height .4s ease, opacity .3s ease, visibility .3s ease }
.animated-search .results-panel .card, .search .results-panel .card { opacity:0; transform:translateY(-6px); transition: all .3s ease }
.animated-search.done .results-panel, .search.done .results-panel { max-height:1600px; opacity:1; visibility:visible }
.animated-search.done .close, .search.done .close { opacity:1; visibility:visible; transform:translate(0,0) }
.animated-search.submit, .search.submit { background:var(--search-primary); transform:scale(.92) }
.animated-search.submit .bar .icon, .search.submit .bar .icon { background:#fff }
.animated-search.submit form input, .search.submit form input { color:#fff }
.animated-search.animate .bar .icon, .search.animate .bar .icon { transform: rotateY(75deg) }
.animated-search .results-panel .card, .search .results-panel .card { display:flex; flex-direction:row; gap:16px; padding:14px; background: linear-gradient(180deg, var(--surface), var(--bg-elevated)); border-radius:12px; border:1px solid rgba(11,43,76,0.04); width:100%; box-sizing:border-box }
.animated-search .results-panel .card .card-media, .search .results-panel .card .card-media { flex:0 0 140px; max-width:140px; min-width:120px; height:88px; border-radius:10px; overflow:hidden }
.animated-search .results-panel .card .card-body, .search .results-panel .card .card-body { padding:8px 12px; min-height:88px; flex:1 }
.animated-search .results-panel .card .card-title, .search .results-panel .card .card-title { font-size:1rem }
.animated-search .results-panel .card .card-desc, .search .results-panel .card .card-desc { font-size:0.9rem; -webkit-line-clamp:2; line-clamp:2 }
.animated-search .results-panel .card .price-badge, .search .results-panel .card .price-badge { min-width:110px; font-size:1rem; padding:8px 12px }

/* Accessibility: focus visible for interactive elements inside search */
.animated-search input:focus-visible, .search input:focus-visible { outline: none; box-shadow: 0 0 0 4px rgba(10,79,176,0.12) }

/* Respect user's reduced motion preference: simplify animations */
@media (prefers-reduced-motion: reduce) {
    .animated-search, .search, .animated-search .results-panel, .search .results-panel, .animated-search .bar .icon { transition-duration: 0.001ms !important; animation-duration: 0.001ms !important }
}

/* When results are shown inside the animated search panel, make them larger and readable */
.animated-search .results-panel .card { display:flex; flex-direction:row; gap:16px; padding:14px; background: linear-gradient(180deg, var(--surface), var(--bg-elevated)); border-radius:12px; border:1px solid rgba(11,43,76,0.04); width: 100%; box-sizing: border-box }
.animated-search .results-panel .card .card-media { flex: 0 0 140px; max-width:140px; min-width:120px; height:88px; border-radius:10px; overflow:hidden }
.animated-search .results-panel .card .card-body { padding:8px 12px; min-height:88px; flex:1 }
.animated-search .results-panel .card .card-title { font-size:1rem }
.animated-search .results-panel .card .card-desc { font-size:0.9rem; -webkit-line-clamp:2; line-clamp: 2; }
.animated-search .results-panel .card .price-badge { min-width:110px; font-size:1rem; padding:8px 12px }
.animated-search .results-panel { position: absolute; left: 16px; right: 16px; top: 62px; width: auto; }

/* Converted SCSS (scoped to .animated-search and .search) */
.animated-search, .search {
    --search-primary: #5628EE;
    --search-primaryLight: #8C6FF0;
    background: var(--surface);
    padding: 12px 16px 12px 48px;
    position: relative;
    display: table;
    margin: auto;
    border-radius: 8px;
    box-shadow: 0 4px 16px -1px rgba(18,22,33, 0.08);
    transition: background .1s ease, transform .1s ease, padding .5s ease .1s;
}
.animated-search .bar, .search .bar {
    position: absolute;
    left: 16px;
    top: 15px;
    width: 32px;
    height: 32px;
    overflow: hidden;
}
.animated-search .bar span, .search .bar span {
    display: block;
    color: #fff;
    position: absolute;
    left: 12px;
    top: 0;
    line-height: 32px;
    font-weight: 500;
    font-size: 16px;
    opacity: 0;
    right: 16px;
    overflow: hidden;
    white-space: nowrap;
}
.animated-search .bar:before, .search .bar:before {
    content: '';
    position: absolute;
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    right: 16px;
    border-radius: 16px 0 0 16px;
    background: var(--search-primary);
    opacity: 0;
}
.animated-search .bar .icon, .search .bar .icon {
    flex: 0 0 32px;
    width: 32px;
    height: 32px;
    background: var(--search-primary);
    border-radius: 50%;
    position: absolute;
    z-index: 1;
    top: 0;
    right: 0;
    transform-style: preserve-3d;
    transform-origin: 0 0;
    transform: scale(.8);
    transition: transform .4s ease 0s, background .1s ease;
}
.animated-search .bar .icon:before, .animated-search .bar .icon:after,
.search .bar .icon:before, .search .bar .icon:after {
    content: '';
    display: block;
    position: absolute;
    backface-visibility: hidden;
    border-radius: 50%;
}
.animated-search .bar .icon:before, .search .bar .icon:before { background: #fff; left: 4px; top: 4px; right: 4px; bottom: 4px; z-index: 2; transform: rotateY(0deg); transition: background .1s ease; }
.animated-search .bar .icon:after, .search .bar .icon:after { background: var(--search-primary); left: 0; top: 0; right: 0; bottom: 0; transform: rotateY(180deg); transition: background .1s ease; }
.animated-search .bar .icon i, .search .bar .icon i { left: 75%; top: 84%; position: absolute; display: block; transform: rotate(-45deg); transform-origin: 0 0; }
.animated-search .bar .icon i:before, .search .bar .icon i:before { content: ''; width: 4px; height: 16px; border-radius: 2px; background: var(--search-primary); display: block; transform-origin: 50% 0; transition: transform .4s ease 0s, background .1s ease; }

.animated-search form, .search form { display: block; padding: 0; margin: 0; }
.animated-search input, .search input { white-space: pre; font-size: 16px; font-family: inherit; padding: 8px 16px 8px 12px; display: inline-block; line-height: 22px; font-weight: 500; }
.animated-search input, .search input { color: var(--search-primaryLight); caret-color: var(--search-primaryLight); border: 0; background: transparent; outline: none; transition: color .1s ease, width .18s ease; }
.animated-search form span, .search form span { display: none; }

.animated-search .close, .search .close {
    border-radius: 50%; position: absolute; right: 16px; width: 24px; height: 24px; background: #E4ECFA; top: 19px; cursor: pointer; opacity: 0; visibility: hidden; transform: translate(-8px, 0); transition: transform .3s ease 0s, opacity .3s ease 0s, visibility .3s ease 0s;
}

/* --- Desktop polish --- */
.animated-search {
    border-radius: 14px;
    padding: 14px 18px 14px 56px;
    box-shadow: 0 14px 40px -12px rgba(11,43,76,0.15);
}
.animated-search .bar .icon { box-shadow: 0 6px 16px rgba(11,43,76,0.08); }
.animated-search input { font-size: 16px; letter-spacing: -0.01em; }
.animated-search .bar .icon { transition: transform .36s cubic-bezier(.2,.9,.2,1), box-shadow .2s ease; }
.animated-search:focus-within { box-shadow: 0 18px 60px -18px rgba(11,43,76,0.18); transform: translateY(-2px); }
.animated-search .bar .icon:hover { transform: scale(.92) rotate(-6deg); }

/* results reveal: make cards pop in with small delay */
.animated-search.done .results-panel .card { opacity:1; transform:translateY(0); transition-delay: 60ms; }

/* --- Mobile polish --- */
@media (max-width:640px) {
    .single-search-landing { padding: 12px; }
    .animated-search {
        width: 100%;
        max-width: 100%;
        padding: 12px 14px 12px 54px;
        border-radius: 12px;
        box-shadow: 0 8px 30px rgba(2,6,23,0.06);
        margin: 0 8px;
    }
    .animated-search .bar { left: 12px; top: 12px; }
    .animated-search input { max-width: calc(100% - 120px); font-size: 15px; padding: 10px 12px 10px 10px; }
    .animated-search .results-panel { position: static; max-height: none; margin-top: 12px; padding: 0; visibility: visible; opacity: 1; }
    .animated-search .results-panel .card { flex-direction: column; gap:10px; padding:12px; }
    .animated-search .results-panel .card .card-media { width:100%; height:160px; min-width:unset; }
    .animated-search .close { right: 12px; top: 12px; }
}

/* ensure link/tap targets are comfortable on mobile */
.animated-search .results-panel .card a, .animated-search .results-panel .card .button { padding: 10px 12px; }
.animated-search .close:before, .animated-search .close:after, .search .close:before, .search .close:after { content: ''; position: absolute; width: 2px; border-radius: 1px; height: 10px; background: #6C7486; display: block; left: 50%; top: 50%; transition: background .3s ease; }
.animated-search .close:before, .search .close:before { transform: translate(-50%, -50%) rotate(45deg); }
.animated-search .close:after, .search .close:after { transform: translate(-50%, -50%) rotate(-45deg); }

.animated-search ul, .search ul, .animated-search .results-panel, .search .results-panel {
    overflow: hidden; margin: 0; padding: 8px 0 24px 0; list-style: none; position: absolute; left: 16px; top: 62px; white-space: nowrap;
}
.animated-search ul.show li, .search ul.show li { opacity: 1; visibility: visible; transform: translate(0, 0); }
.animated-search li, .search li { margin: 0 0 20px 0; opacity: 0; visibility: hidden; transition: all .3s ease; transform: translate(0, -6px); }
.animated-search li:last-child, .search li:last-child { margin-bottom: 0; }
.animated-search li a, .search li a { display: block; font-size: 12px; text-decoration: none; padding-left: 36px; padding-right: 24px; position: relative; }
.animated-search li a img, .search li a img { display: block; left: 0; width: 20px; top: 50%; position: absolute; transform: translate(0, -50%); }
.animated-search li a h5, .search li a h5 { margin: 0; color: #151924; font-size: 12px; }
.animated-search li a p, .search li a p { margin: 4px 0; color: #6C7486; }
.animated-search li a span, .search li a span { display: block; font-size: 10px; color: #6C7486; opacity: .6; font-style: italic; }
.animated-search li:hover, .search li:hover { transform: translate(0, -2px); }

.animated-search.submit, .search.submit { background: var(--search-primary); transform: scale(.92); }
.animated-search.submit .bar .icon, .search.submit .bar .icon { background: #fff; }
.animated-search.submit .bar .icon:before, .search.submit .bar .icon:before { background: var(--search-primary); }
.animated-search.submit .bar .icon:after, .search.submit .bar .icon:after { background: #fff; }
.animated-search.submit form input, .search.submit form input { color: #fff; }

.animated-search.prepare .bar:before, .search.prepare .bar:before { opacity: 1; transition: opacity 0s ease 1.25s; }
.animated-search.prepare .bar .icon, .search.prepare .bar .icon { transform: scale(1); transform-origin: 50% 50% 0; transition: transform .4s ease .85s, transform-origin 0s ease 1.25s, background .1s ease; }
.animated-search.prepare .bar .icon i:before, .search.prepare .bar .icon i:before { transform: scaleY(0); transition: transform .4s ease .4s, background .1s ease; }

.animated-search.animate .bar .icon, .search.animate .bar .icon { transform: rotateY(75deg); transition: transform .6s ease 0s; }
.animated-search.animate .bar span, .search.animate .bar span { opacity: 1; }

.animated-search.done, .search.done { padding-right: 56px; transition: padding .4s ease; }
.animated-search.done .bar .icon, .search.done .bar .icon { transform: rotateY(180deg); transition: transform .7s ease 0s; }
.animated-search.done .close, .search.done .close { opacity: 1; visibility: visible; transform: translate(0, 0); transition: transform .4s ease .5s, opacity .4s ease .5s, visibility .4s ease .5s; }
.animated-search.done .close:hover, .search.done .close:hover { background: var(--search-primaryLight); }

.animated-search.reset .bar:before, .search.reset .bar:before { opacity: 0; transition: opacity 0s ease .4s; }
.animated-search.reset .bar .icon, .search.reset .bar .icon { transform: rotateY(0deg); transition: transform .4s ease 0s; }

