/* =====================
   Reset & Base
   ===================== */
:is(html, body) { height: 100%; }
body {
    font-family: var(--font-sans, Arial, sans-serif);
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    /* Solid, uniform page background using design token */
    background: var(--bg);
    color: var(--text);
    -webkit-font-smoothing: antialiased; /* kept for consistency */
}

:is(h1,h2,h3) { color: #333; }

/* =====================
     Accessibility & Motion
     ===================== */
:where(a, button, .button) { -webkit-tap-highlight-color: transparent; }
:where(a:focus-visible, button:focus-visible, .button:focus-visible) { outline: none; box-shadow: 0 0 0 4px rgba(10,79,176,0.12); }

@media (prefers-reduced-motion: reduce) {
    * { animation-duration: 0.001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.001ms !important; scroll-behavior: auto !important; }
}

/* prettier hero title for the search page */
.hero-title {
    font-size: clamp(1.8rem, 4vw, 2.6rem);
    line-height: 1.02;
    margin: 6px 0 18px 0;
    font-weight: 700;
    letter-spacing: -0.02em;
    text-align: center;
    color: var(--text);
    text-shadow: 0 6px 18px rgba(11,43,76,0.08);
}

.container { max-width: 1200px; margin: 0 auto; padding: 20px; }

.minimal-center { display:flex; flex-direction:column; align-items:center; gap:18px; max-width:880px; width:100%; }
.search-wrap { width:100%; display:flex; justify-content:center; }

/* hero-search: visually anchored under fixed header with polished card style */
.hero-search {
    margin-top: 8px; /* slight spacing under fixed header */
    width: 100%;
    /* use elevated bg token so hero feels slightly distinct but harmonious with page */
    background: var(--bg-elevated);
    border-radius: 18px;
    padding: 18px 22px;
    box-shadow: 0 12px 30px rgba(10,79,176,0.06), inset 0 1px 0 rgba(255,255,255,0.6);
    border: 1px solid rgba(11,43,76,0.04);
    position: relative;
}

/* optional subtle textured overlay for visual depth; enable by adding .has-texture */
.hero-search.has-texture::after {
    content: '';
    pointer-events: none;
    position: absolute;
    inset: 0;
    background-image: radial-gradient(circle at 10% 20%, rgba(255,255,255,0.03), transparent 10%),
                      radial-gradient(circle at 80% 80%, rgba(0,0,0,0.01), transparent 10%);
    mix-blend-mode: overlay;
    opacity: 0.9;
}

/* reduce the large header space since page title removed */
.app-header { display:none }

/* =====================
   Components: Buttons
   ===================== */
:where(.button) {
    display:inline-flex;
    align-items:center;
    gap:8px;
    background:var(--primary);
    color:#fff;
    border:0;
    padding:10px 16px;
    border-radius:calc(var(--radius-lg) * 1.1);
    cursor:pointer;
    font-weight:var(--fw-medium);
    text-decoration:none;
    transition: transform 180ms ease, box-shadow 180ms ease, filter 140ms ease;
}

:where(.button):hover { transform: translateY(-4px); filter: brightness(.96); box-shadow: 0 12px 36px rgba(11,43,76,0.08); }
:where(.button):focus-visible { outline: none; box-shadow: 0 0 0 4px rgba(10,79,176,0.12); }
:where(.button)[disabled], :where(.button):disabled { opacity:0.6; cursor:not-allowed; filter:grayscale(.08); } /* unified button block */

.button.primary { background: linear-gradient(180deg,var(--primary),var(--primary-600)); box-shadow: var(--shadow-sm); }


.results-grid {
    display:grid;
    grid-template-columns: 1fr;
    gap:20px;
    /* Full-bleed results: stretch the results area to the viewport edges while keeping inner gutter */
    width: 100vw;
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw);
    padding-left: 28px; /* inner gutter so cards don't touch the viewport edge */
    padding-right: 28px;
    box-sizing: border-box;
}
.card {
    background: linear-gradient(180deg, var(--surface), var(--surface));
    border-radius:calc(var(--radius-lg) * 1.5);
    box-shadow: var(--shadow-sm);
    overflow:hidden;
    border:1px solid rgba(11,43,76,0.04);
    display:flex;
    flex-direction:row;
    align-items:stretch;
    /* ensure cards span the available width and have comfortable internal padding */
    width: 100%;
}
.card-grid { display:flex; align-items:stretch; }
.card-media {
    /* make the media a flexible fixed column that doesn't overflow the body */
    flex: 0 0 260px;
    max-width: 260px;
    min-width: 160px;
    background: linear-gradient(135deg,#eef7ff,#fbfdff);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:8px;
    overflow:hidden;
}
.card-media img,
.card-media .thumb img {
        font-size: 16px; /* sensible base for rem calculations */
        line-height: 1.45;
        -moz-osx-font-smoothing: grayscale;
    width:100%;
    height:100%;
    object-fit:cover;
    display:block;
    border-radius:12px;
}
.thumb { width:100px; height:100px; border-radius:12px; background: linear-gradient(180deg, var(--bg-elevated), var(--surface)); display:flex; align-items:center; justify-content:center; font-size:28px; color:var(--primary-600); font-weight:800; }
.card-body { padding:20px 26px; flex:1; display:flex; flex-direction:column; min-height:220px; }
.card-header { display:flex; align-items:flex-start; justify-content:space-between; gap:12px }
.card-title { font-size:1.125rem; color:var(--text); font-weight:700; text-decoration:none }
.card-title:hover { text-decoration:underline }
.price-badge { background:linear-gradient(180deg,#f5fff4,#ecfff0); color:var(--accent-600); font-weight:900; padding:10px 16px; border-radius:12px; font-size:1.15rem; box-shadow: inset 0 -1px 0 rgba(0,0,0,0.02); min-width:120px; text-align:right; align-self:flex-start }
.card-desc { color:var(--text); margin-top:8px; font-size:0.95rem; line-height:1.3; overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:3; line-clamp:3; }
.card-meta { font-size: 13px; color: var(--muted); margin-top:6px }
.card-actions { margin-top: auto }

.card {
    transition: transform 220ms cubic-bezier(.16,.84,.24,1), box-shadow 220ms cubic-bezier(.16,.84,.24,1);
}
.card-actions .button { padding:8px 12px }

.map { height:400px; width:100%; border-radius:var(--radius-md); margin-top:18px }

.app-header { text-align:center; margin-bottom:18px }
.app-header .lead { color:var(--muted); margin-top:6px }

.search-form { background: linear-gradient(90deg, var(--surface), #fbfbfb); border:1px solid rgba(11,43,76,0.04); padding:12px; border-radius:var(--radius-sm); display:block; margin-bottom:14px }
.search-row { display:flex; gap:12px; align-items:center; margin-bottom:8px }
.search-input { flex:1; padding:12px 14px; border:1px solid rgba(11,43,76,0.08); border-radius:999px; font-size:14px; background:transparent; box-shadow: var(--shadow-sm); color:var(--text) }
.search-input::placeholder { color: rgba(11,43,76,0.48); }

/* Center hero content */
.hero-search { display:flex; align-items:center; justify-content:center; }

/* vertical centering variant for the hero (used on the single-search page) */
.hero-search.hero-center {
    min-height: calc(100vh - 140px); /* account for fixed header + padding */
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    padding-left: 28px;
    padding-right: 28px;
}

/* utility: full width helper to replace inline styles */
.full-width { width: 100%; }

.search-select { width:180px; padding:8px 10px; border-radius:6px; border:1px solid rgba(11,43,76,0.06); background:transparent }
.search-controls { display:flex; justify-content:space-between; align-items:center }
.checkbox-inline { display:flex; align-items:center; gap:8px; color:var(--muted) }

/* ---------------------------
   Search component (DRY)
   Applies to both .animated-search and .search
   --------------------------- */

/* Theme / tokens */
:root {
  --search-primary: #5628EE;
  --search-primaryLight: #8C6FF0;
  --search-shadow: 0 6px 18px rgba(11,43,76,0.12);
  --search-surface-shadow: 0 18px 40px rgba(11,43,76,0.08);
  --search-bg: var(--surface, #fff);
  --search-bg-elev: var(--bg-elevated, #fbfdff);
  --search-radius: 12px;
  --search-padding-left: 48px;
  --search-gap: 16px;
  --placeholder-light: rgba(11,43,76,0.58);
  --placeholder-dark: rgba(255,255,255,0.44);
}

/* Base container */
:is(.animated-search, .search) {
  background: var(--search-bg);
  padding: 12px 16px 12px var(--search-padding-left);
  position: relative;
  display: block;
  margin: 0 auto;
  border-radius: 8px;
  box-shadow: 0 4px 16px -1px rgba(18,22,33,0.08);
  transition: background .12s linear, transform .12s ease;
  overflow: visible; /* allow results to overflow */
  min-width: 220px;
}

/* Bar (holds icon) - positioned to the left of the input */
:is(.animated-search, .search) .bar {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  width: 44px;
  height: 44px;
  pointer-events: none; /* icon handles clicks */
}

/* Icon as a real button (accessible/clickable) */
:is(.animated-search, .search) .bar .icon {
  pointer-events: auto;
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%) scale(1);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 34px;
  height: 34px;
  border-radius: 50%;
  border: 0;
  background: var(--search-primary);
  color: white;
  box-shadow: var(--search-shadow);
  cursor: pointer;
  z-index: 40;
  transition: transform .22s cubic-bezier(.22,.9,.28,1), box-shadow .16s ease, background .12s ease;
}

/* subtle hover/focus affordance for the icon */
:is(.animated-search, .search) .bar .icon:hover,
:is(.animated-search, .search) .bar .icon:focus {
  transform: translate(-50%, -50%) scale(1.06);
  box-shadow: 0 10px 28px rgba(11,43,76,0.14);
  outline: none;
}

/* search input: core styles */
:is(.animated-search, .search) input[type="search"],
:is(.animated-search, .search) input[type="text"] {
  display: block;
  font-size: 16px;
  font-family: inherit;
  font-weight: 500;
  line-height: 22px;
  color: var(--text, #0b2b4c);
  background: transparent;
  border: none;
  outline: none;
  padding: 8px 12px;
  width: 100%;
  min-width: 80px;
  caret-color: var(--search-primaryLight);
  transition: color .12s ease, width .18s ease;
  -webkit-font-smoothing: antialiased;
}

/* placeholder: readable in light/dark */
:is(.animated-search, .search) input::placeholder {
  color: var(--placeholder-light);
  font-weight: 500;
}
.theme-dark :is(.animated-search, .search) input::placeholder {
  color: var(--placeholder-dark);
}

/* focus-visible accessibility */
:is(.animated-search, .search) input:focus-visible {
  outline: none;
  box-shadow: 0 0 0 6px rgba(10,79,176,0.08);
  border-radius: 6px;
}

/* close button on the right (initially hidden) */
:is(.animated-search, .search) .close {
  position: absolute;
  top: 50%;
  right: 12px;
  transform: translateY(-50%);
  width: 26px;
  height: 26px;
  background: #E4ECFA;
  border-radius: 50%;
  border: 0;
  opacity: 0;
  visibility: hidden;
  cursor: pointer;
  transition: opacity .22s ease, transform .22s ease;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  z-index: 40;
}

/* show close when component signals done/expanded */
:is(.animated-search.done, .search.done, .animated-search.expanded, .search.expanded) .close {
  opacity: 1;
  visibility: visible;
  transform: translateY(-50%) scale(1);
}

/* Results panel: collapsed by default, animated reveal when .expanded/.done */
:is(.animated-search, .search) .results-panel {
  position: absolute;
  top: calc(100% + 12px);
  left: 12px;
  right: 12px;
  max-height: 0;
  opacity: 0;
  visibility: hidden;
  overflow: hidden;
  list-style: none;
  transform: translateY(-6px);
  transition: transform .28s cubic-bezier(.2,.9,.3,1), opacity .28s ease, max-height .45s ease;
  background: linear-gradient(180deg, var(--search-bg), var(--search-bg-elev));
  box-shadow: var(--search-surface-shadow);
  border-radius: var(--search-radius);
  z-index: 30;
  padding: 8px;
}

/* visible state */
:is(.animated-search.done, .search.done, .animated-search.expanded, .search.expanded) .results-panel {
  max-height: 900px; /* tall enough for many results */
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

/* result card: keep compact, rounded, subtle border & shadow */
:is(.animated-search, .search) .results-panel .card {
  display: flex;
  gap: var(--search-gap);
  padding: 12px;
  align-items: center;
  background: linear-gradient(180deg, var(--search-bg), var(--search-bg-elev));
  border-radius: 12px;
  border: 1px solid rgba(11,43,76,0.04);
  box-shadow: 0 6px 18px rgba(11,43,76,0.03);
  transition: transform .26s ease, opacity .24s ease;
  transform: translateY(-6px);
  opacity: 1; /* cards are visible when panel is visible; fine-tune with JS if you want staggered reveals */
}

/* media & body inside card */
:is(.animated-search, .search) .results-panel .card .card-media {
  flex: 0 0 140px;
  height: 88px;
  border-radius: 10px;
  overflow: hidden;
  background: #f2f6fb; /* fallback background for images */
  object-fit: cover;
}
:is(.animated-search, .search) .results-panel .card .card-body {
  padding: 8px 0;
  flex: 1;
  min-width: 0; /* allow text truncation */
}

/* Small visual lift on card hover */
:is(.animated-search, .search) .results-panel .card:hover {
  transform: translateY(-3px);
  box-shadow: 0 12px 30px rgba(11,43,76,0.06);
}

/* ---------------------------
   Responsive adjustments
   --------------------------- */
@media (max-width: 840px) {
  :is(.animated-search, .search) {
    width: 100%;
    padding-left: 56px; /* keep room for icon */
    border-radius: 12px;
  }
  :is(.animated-search, .search) .bar { left: 10px; width: 40px; height: 40px; }
  :is(.animated-search, .search) .bar .icon {
    width: 28px;
    height: 28px;
    transform: translate(-50%, -50%) scale(.96);
  }
  :is(.animated-search, .search) .results-panel { left: 8px; right: 8px; top: calc(100% + 8px); padding: 8px; }
  :is(.animated-search, .search) .results-panel .card .card-media { flex: 0 0 120px; height: 80px; }
}

@media (max-width: 480px) {
  :is(.animated-search, .search) { padding-left: 48px; }
  :is(.animated-search, .search) .bar .icon { width: 26px; height: 26px; transform: translate(-50%, -50%) scale(.9); }
  :is(.animated-search, .search) .results-panel .card { gap: 12px; padding: 10px; border-radius: 10px; }
}

/* ---------------------------
   Optional: theme tweaks (keeps placeholder readable)
   --------------------------- */
.theme-dark :is(.animated-search, .search) {
  background: var(--search-bg); /* ensure dark bg is applied via theme variables */
}
.theme-dark :is(.animated-search, .search) input::placeholder {
  color: var(--placeholder-dark);
}

/* ---------------------------
   Notes:
   - Keep JS toggling `.expanded` / `.done` on the container to show the results panel.
   - For screen-reader live updates, add an ARIA live region in JS to announce results count.
   --------------------------- */

